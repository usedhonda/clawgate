# 4-stage mode: add "auto" (Simple Auto) mode

## Date: 2026-02-09

## Summary

Added `auto` (Simple Auto) mode as 4th stage between `observe` and `autonomous`.

### Mode matrix

| Feature | ignore | observe | auto | autonomous |
|---------|--------|---------|------|------------|
| Completion detection | - | LINE notify | Continue prompt -> notify on done | LINE notify |
| Permission auto-approve | - | - | YES | YES |
| POST /v1/send | - | - | YES | YES |
| hasInputField=true | - | - | YES | YES |
| cc_task on completion | - | - | YES (template only) | YES (AI-designed) |
| LINE -> CC task forward | - | - | YES | YES |
| Roster display | - | YES | YES | YES |

### Key difference: auto vs autonomous

- **auto**: Chi sends a fixed "continue with remaining tasks" prompt. CC decides what to do.
- **autonomous**: Chi analyzes output and designs specific follow-up tasks.

## Changed files

1. `ClawGate/Adapters/Tmux/TmuxAdapter.swift` — L19 comment, L49 sendMessage guard, L129-130 getContext
2. `ClawGate/Adapters/Tmux/TmuxInboundWatcher.swift` — L39 permission auto-approve, L50 completion detection
3. `ClawGate/UI/MenuBarApp.swift` — 4 mode options, tag renumbering (3/2/1/0), modeImage, setSessionMode
4. `extensions/openclaw-plugin/src/gateway.js` — buildRosterPrefix, handleInboundMessage (taskCapableProjects), handleTmuxCompletion (auto prompt + cc_task extraction)
5. `ClawGate/Core/Config/AppConfig.swift` — L15 comment
6. `ClawGate/Core/BridgeServer/BridgeModels.swift` — L178 comment
7. `CLAUDE.md` — OpenClaw Agent Integration section

## Verification

- Build: OK
- Deploy: OK (dev-deploy.sh full pipeline)
- Smoke test: 5/5 PASS
- OpenClaw gateway: restarted, doctor OK, polling started
